--1. Обновить пароль пользователя postgres
sudo -i -u postgres
psql
ALTER USER postgres WITH PASSWORD 'sa';
exit

--2. Настройки из файла postgresql.conf
Файл postgresql.conf используется для настройки параметров конфигурации PostgreSQL сервера. 
В этом файле можно задать различные параметры, такие как настройки памяти, параметры безопасности, настройки протоколирования и 
другие параметры, влияющие на работу PostgreSQL сервера.

--2.1 Настройки подключения - секция Connection Settings (https://postgrespro.ru/docs/postgrespro/9.5/runtime-config-connection)

listen_addresses - Задаёт адреса TCP/IP, по которым сервер будет принимать подключения клиентских приложений. По умолчанию localhost.

Пример:
listen_addresses = '*' - сервер слушал все доступные IP-адреса.

port - TCP-порт, открываемый сервером; по умолчанию, 5432. 

--3. Настройки из файла pg_hba.conf
Аутентификация клиентов управляется конфигурационным файлом, который традиционно называется pg_hba.conf и 
расположен в каталоге с данными кластера базы данных.  
В этом файле определяются правила доступа, указывающие, какие пользователи могут подключаться к базе данных, 
с каких IP-адресов, используя какие методы аутентификации и какие базы данных они могут использовать.
(https://postgrespro.ru/docs/postgrespro/10/auth-pg-hba-conf)

Пример:

# TYPE  DATABASE        USER            ADDRESS                 METHOD


# 1) Позволяет любому пользователю локальной системы подключаться
# к любой базе данных, используя любое имя пользователя баз данных, через
# Unix-сокеты (по умолчанию для локальных подключений).

local   all             all                                     trust

local для type - тип подключения через Unix-сокеты. 
all для database - текущая запись соответствует всем базам данным сервера. Т.е. можно подключаться ко всем базам данным сервера.
    для user     - текущая запись соответствует именам всех пользователей баз(ы) данных сервера. Т.е. все пользователи баз(ы) данных могут подключаться к базе(ам) данных сервера.
пусто для address - текущая запись соответствует адресу серверу, т.е. адрес клиентской машины равен локальному адресу машины, на котором находиться сервер.
trust для method  - текущая запись соответствует методы аутентификации, разрешающее безусловное подключение. Этот метод позволяет тому, кто может подключиться к серверу с базой данных, войти под любым желаемым пользователем БД без введения пароля и без какой-либо другой аутентификации. 



#2) То же, но для локальных замкнутых подключений по TCP/IP и адресу IPv4

host    all             all             127.0.0.1/32            trust

host для type - тип подключения по по TCP/IP.
127.0.0.1/32 для address - текущая запись соответствует IPv4 адресу сервера.



#3) То же, но для локальных замкнутых подключений по TCP/IP и адресам IPv6.

host    all             all             ::1/128                 trust


#4) Настройки локальных подключений к базе данных replication.

local   replication     all                                     trust
host    replication     all             127.0.0.1/32            trust
host    replication     all             ::1/128                 trust

#5) Настройка подключения с клиентской машины по адресу 192.168.1.20 для любых пользователей к любым базам данных 
#с указанием надёжного пароля, используя метод scram-sha-256

host all all 0.0.0.0/0 scram-sha-256


--4. Внесение изменений в параметры конфигурации сервера

Восстановить значение параметров по умолчанию:
ALTER SYSTEM RESET ALL;
SELECT pg_reload_conf();

--4.1 parallel_leader_participation

parallel_leader_participation - Позволяет ведущему процессу выполнять план запроса ниже узлов Gather и Gather Merge, не ожидая рабочие процессы. 
По умолчанию этот параметр включён (on). https://postgrespro.ru/docs/postgresql/11/runtime-config-query

SHOW parallel_leader_participation

ALTER parallel_leader_participation = off;
SELECT pg_reload_conf(); #Даёт команду серверным процессам перегрузить конфигурацию




